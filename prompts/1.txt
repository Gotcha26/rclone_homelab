Ecrit moi un petit script rclone (nommé rclone_sync_job.sh) qui va puiser ses jobs dans le fichier attenant rclone_jobs.txt Il va utiliser l'option --log-level INFO








#!/usr/bin/env bash
###############################################################################
# Script : rclone_sync_job.sh
# Version : 1.0
# Auteur  : Julien & ChatGPT
#
# Description :
#   Lit la liste des jobs dans rclone_jobs.txt et exécute rclone pour chacun.
#   Format du fichier rclone_jobs.txt :
#       /chemin/local  remote:chemin/distant
#
#   Les lignes commençant par # ou vides sont ignorées.
###############################################################################

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
JOBS_FILE="$SCRIPT_DIR/rclone_jobs.txt"

if [[ ! -f "$JOBS_FILE" ]]; then
    echo "Fichier $JOBS_FILE introuvable." >&2
    exit 1
fi

while IFS= read -r line; do
    # Ignorer les commentaires et lignes vides
    [[ -z "$line" || "$line" =~ ^# ]] && continue

    src=$(echo "$line" | awk '{print $1}')
    dst=$(echo "$line" | awk '{print $2}')

    if [[ -z "$src" || -z "$dst" ]]; then
        echo "Ligne invalide dans $JOBS_FILE : $line" >&2
        continue
    fi

    echo "=== Synchronisation : $src → $dst ==="
    rclone sync "$src" "$dst" --log-level INFO
    echo
done < "$JOBS_FILE"
